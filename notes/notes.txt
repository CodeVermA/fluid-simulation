ARCHITECTURAL DECISIONS: WebGL2 FLUID SIMULATION
Date: November 27, 2025

--------------------------------------------------------------------------------
DECISION 1: ALGORITHM SELECTION
Choice: Stable Fluids (Eulerian Grid)
Rejected: MLS-MPM (Hybrid Particle/Grid)

REASONING:
1. Educational Value (Fields vs. Particles):
   - Stable Fluids operates on a fixed grid, making it superior for teaching
     concepts like Vector Fields, Partial Differential Equations (PDEs),
     and Pressure Divergence.
   - MLS-MPM is better for "sandbox" physics (material interaction like sand/water)
     but obscures the fundamental fluid dynamics (Navier-Stokes) behind
     particle clumping.

2. Visualizing Parameters:
   - Changes in viscosity or diffusion are immediately visually apparent on a
     grid (blurring/slowing).
   - In particle systems, these parameters often result in emergent behaviors
     (clumping/jelly-like motion) that are harder to isolate educationally.

3. Aerodynamics & Obstacles:
   - Stable Fluids is the industry standard for wind tunnel sims. It clearly
     shows streamlines, high-pressure zones, and vortices wrapping around objects.
   - Particle systems treat obstacles as collision objects (bouncing), making
     it difficult to see subtle flow patterns like the von Kármán vortex street.

4. Technical Stack:
   - Stable Fluids maps 1:1 to WebGL2 (Texture ping-ponging).
   - MLS-MPM effectively requires WebGPU (Compute Shaders) for performance,
     which has lower device compatibility and a steeper learning curve.

--------------------------------------------------------------------------------
DECISION 2: DIMENSIONALITY
Choice: 2D Simulation
Rejected: 3D Simulation

REASONING:
1. Visualization Clarity (The "MRI" Effect):
   - In 3D, the outer layers of fluid occlude the inner layers. You cannot
     see the core of a vortex or the flow dynamics near an object because
     smoke blocks the view.
   - 2D acts as a cross-section, offering the clearest view of mathematical
     behaviors and flow structures.

2. Implementation Complexity:
   - Physics: Extending math from 2D to 3D is trivial (adding a Z-loop).
   - Rendering: Rendering 3D fluid is significantly harder, requiring
     Volumetric Raymarching (casting rays through 3D textures), which is
     computationally heavy and code-intensive.

--------------------------------------------------------------------------------
FINAL VERDICT:
Proceed with a 2D Stable Fluids implementation using WebGL2. This offers the
best balance of visual clarity, educational value for physics concepts, and
achievable technical scope within the 8-week timeline.

--------------------------------------------------------------------------------
Decision: WebGL 2.0
Rejected: WebGPU

REASONING:
1. Texture Support: It supports Floating Point Textures (FLOAT) out of the box, 
   which is critical for fluid physics (precision is required for pressure calculations).

2. Architecture: The "Stable Fluids" algorithm relies on "Ping-Pong" texture 
   swapping (reading from Texture A $\rightarrow$ writing to Texture B). 
   This is the standard workflow in WebGL fragment shaders.
   
3. Compatibility: It runs on virtually all modern browsers (Desktop and Mobile) without experimental flags.